<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Capit Warkop69 - Professional System</title>
    <script src="admin_config.js"></script>
    <style>
        :root { --tema: #ff4757; --gold: #ffd700; }
        body, html { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; color: white; height: 100%; overflow: hidden; background: #000; }

        /* --- HALAMAN LOGIN --- */
        #login-page { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; text-align: center; padding: 20px; box-sizing: border-box; }
        
        /* Efek Api Membara */
        .fire-container { position: relative; margin-bottom: 5px; z-index: 5; }
        .fire-text { font-size: 38px; font-weight: 900; text-transform: uppercase; animation: burn 0.5s infinite alternate; }
        .fire-emoji { font-size: 25px; position: absolute; bottom: -5px; animation: smoke 1.5s infinite; opacity: 0; }
        @keyframes burn { from { transform: scale(1); } to { transform: scale(1.05); } }
        @keyframes smoke { 0% { transform: translateY(0) scale(1); opacity: 0.8; } 100% { transform: translateY(-50px) scale(2); opacity: 0; } }

        .container-input { background: rgba(255,255,255,0.05); padding: 25px; border-radius: 20px; width: 100%; max-width: 350px; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px); box-sizing: border-box; }
        input { width: 100%; padding: 15px; border: none; border-radius: 10px; margin-bottom: 15px; text-align: center; font-weight: bold; box-sizing: border-box; font-size: 16px; }
        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 10px; font-weight: 800; font-size: 18px; cursor: pointer; margin-bottom: 10px; color: white; transition: 0.2s; }

        /* --- NOTIFIKASI & MODAL --- */
        #notif-error { display: none; position: fixed; top: 15px; left: 15px; right: 15px; background: #1e1e1e; border-radius: 15px; padding: 18px; z-index: 5000; box-shadow: 0 10px 30px #000; animation: slideDown 0.4s; }
        @keyframes slideDown { from { transform: translateY(-100px); } to { transform: translateY(0); } }
        
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 6000; align-items: center; justify-content: center; }
        .modal-box { background: #111; width: 85%; max-height: 60vh; border-radius: 25px; padding: 25px; overflow-y: auto; border: 2px solid white; box-sizing: border-box; }

        /* --- AREA GAME --- */
        #game-page { display: none; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .machine { width: 320px; height: 450px; background: #0f172a; border: 6px solid #1e293b; border-radius: 20px; position: relative; overflow: hidden; }
        #claw-box { position: absolute; top: 0; left: 130px; width: 60px; display: flex; flex-direction: column; align-items: center; z-index: 10; }
        #wire { width: 2px; height: 40px; background: #64748b; transition: height 1s; }
        #claw-img { width: 50px; height: 50px; background: url('https://cdn-icons-png.flaticon.com/512/2881/2881142.png') no-repeat center; background-size: contain; }
        .prize-item { width: 50px; height: 50px; position: absolute; background-size: contain; background-repeat: no-repeat; background-position: center; }
    </style>
</head>
<body>

    <div id="notif-error">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <span>‚ö†Ô∏è <b>SISTEM:</b> Cupon Tidak Ada</span>
            <span onclick="this.parentElement.parentElement.style.display='none'" style="font-size:26px; cursor:pointer; color:var(--tema);">√ó</span>
        </div>
    </div>

    <div id="login-page">
        <div class="fire-container">
            <div class="fire-text" id="dom-judul"></div>
            <span class="fire-emoji" style="left:10%">üî•</span>
            <span class="fire-emoji" style="left:80%">üî•</span>
        </div>
        <div style="margin-bottom:25px;"><small id="dom-sub"></small></div>
        
        <div class="container-input">
            <input type="text" id="coupon-in" placeholder="KETIK KODE DI SINI...">
            <button class="btn-main" id="btn-cari" onclick="checkKupon()">CARI</button>
            <button class="btn-main" id="btn-list" onclick="showHadiah()" style="background:transparent; border:2px solid white;">üëÄ LIHAT HADIAH</button>
        </div>
    </div>

    <div id="modal-hadiah" class="modal">
        <div class="modal-box" id="dom-modal-box">
            <span onclick="document.getElementById('modal-hadiah').style.display='none'" style="float:right; cursor:pointer; color:red; font-size:35px; font-weight:bold;">√ó</span>
            <h2 id="modal-title">Daftar Hadiah</h2>
            <div id="isi-hadiah" style="text-align:left; line-height:1.6;"></div>
        </div>
    </div>

    <div id="game-page">
        <div class="machine" id="floor">
            <div id="claw-box">
                <div id="wire"></div>
                <div id="claw-img"></div>
            </div>
        </div>
        <button class="btn-main" id="btn-run" onclick="jalankan()" style="width:200px; margin-top:20px;">‚ñ∂Ô∏è MULAI CAPIT</button>
    </div>

    <script>
        let kadoTerpilih = "";
        let sibuk = false;

        // Inisialisasi Tampilan dari Config
        window.onload = () => {
            document.body.style.background = MASTER_CONFIG.bgHalaman;
            document.getElementById('dom-judul').innerText = MASTER_CONFIG.judulUtama;
            document.getElementById('dom-judul').style.textShadow = `0 0 20px ${MASTER_CONFIG.warnaTema}`;
            document.getElementById('dom-sub').innerText = MASTER_CONFIG.subJudul;
            document.getElementById('dom-sub').style.color = MASTER_CONFIG.warnaHadiah;
            document.getElementById('btn-cari').style.background = MASTER_CONFIG.warnaTema;
            document.getElementById('btn-run').style.background = MASTER_CONFIG.warnaTema;
            document.getElementById('notif-error').style.borderLeft = `6px solid ${MASTER_CONFIG.warnaTema}`;
            document.getElementById('dom-modal-box').style.borderColor = MASTER_CONFIG.warnaHadiah;
            document.getElementById('modal-title').style.color = MASTER_CONFIG.warnaHadiah;
        };

        // Animasi Asap/Api tambahan
        setInterval(() => {
            const smoke = document.createElement('span');
            smoke.className = 'fire-emoji';
            smoke.innerText = Math.random() > 0.5 ? 'üî•' : 'üí®';
            smoke.style.left = Math.random() * 100 + '%';
            document.querySelector('.fire-container').appendChild(smoke);
            setTimeout(() => smoke.remove(), 1500);
        }, 500);

        function checkKupon() {
            const val = document.getElementById('coupon-in').value.toUpperCase();
            if(MASTER_CONFIG[val]) {
                kadoTerpilih = MASTER_CONFIG[val];
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('game-page').style.display = 'flex';
                mulaiMesin();
            } else {
                document.getElementById('notif-error').style.display = 'block';
                setTimeout(() => document.getElementById('notif-error').style.display = 'none', 4000);
            }
        }

        function mulaiMesin() {
            const floor = document.getElementById('floor');
            for(let i=0; i<25; i++) {
                const p = document.createElement('div');
                p.className = 'prize-item';
                p.style.backgroundImage = `url('${MASTER_CONFIG.gambarHadiah}')`;
                p.style.left = Math.random() * 260 + 'px';
                p.style.bottom = Math.random() * 60 + 'px';
                p.style.transform = `rotate(${Math.random()*360}deg)`;
                floor.appendChild(p);
            }
        }

        async function jalankan() {
            if(sibuk) return;
            sibuk = true;
            const wire = document.getElementById('wire');
            wire.style.height = "350px";
            await new Promise(r => setTimeout(r, 1000));

            if(kadoTerpilih !== "Zonkk") {
                const item = document.createElement('div');
                item.className = 'prize-item';
                item.style.backgroundImage = `url('${MASTER_CONFIG.gambarHadiah}')`;
                item.style.bottom = "-15px";
                item.style.left = "5px";
                document.getElementById('claw-img').appendChild(item);
            }

            wire.style.height = "40px";
            await new Promise(r => setTimeout(r, 1200));
            
            if(kadoTerpilih !== "Zonkk") {
                alert("SELAMAT! Anda mendapatkan: " + kadoTerpilih + "\n\nSilahkan Screenshot dan kirim ke Admin!");
            } else {
                alert("Yahh.. Sayang sekali miring sedikit! Coba lagi ya.");
            }
            location.reload();
        }

        function showHadiah() {
            document.getElementById('isi-hadiah').innerHTML = MASTER_CONFIG.listHadiah;
            document.getElementById('modal-hadiah').style.display = 'flex';
        }
    </script>
</body>
</html>
